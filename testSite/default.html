<!DOCTYPE html>
<html lang="en">

<head>
    <title>RFX CONTROL</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="default.css"> <!-- custom css styling-->
</head>

<body>
    <div class="rfx-panel" style="max-width: 400px; margin:auto">
        <label id="header-label">RFX-ESP</label>
        <div>
            <button class="rfx-button" onclick="window.location.href='connect'">WiFi Connection</a>
            <button class="rfx-button" onclick="window.location.href='stats'">System Stats</button>
            <button class="rfx-button" onclick="window.location.href='update'">Firmware Update</button>
            <button id="restart_button" class="rfx-button">Restart</button>
        </div>
    </div>
</body>
<script>
    document.getElementById('restart_button').addEventListener('click', event => {
   if (!confirm("Perform Hardware Restart (Power Cycle)?"))
     return
   var xhr = new XMLHttpRequest();
   function bad_response() {

   }
   xhr.onload = () => {
     if (xhr.response === 'ok') {
       console.log("restart recieved")
     }
     else {
       console.log("restart bad response")
     }

   };
   xhr.onerror = () => {
     console.log("restart error")
   }
   xhr.ontimeout = () => {
     console.log("restart timeout")
   }
   xhr.timeout = 2000
   xhr.open("GET", "/server/restart", true);
   xhr.setRequestHeader("Content-Type", "text/html");
   xhr.send();
 })
</script>